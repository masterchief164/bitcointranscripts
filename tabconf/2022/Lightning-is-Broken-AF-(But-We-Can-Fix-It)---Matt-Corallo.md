---
title: Lightning is Broken AF (But We Can Fix It) - Matt Corallo
transcript_by: masterchief164 via TBTBTC v1.0.0
media: https://www.youtube.com/watch?v=s9KMRWkcwtE
date: 2022-11-07
---

 being still the direction of macroeconomic, you may know of inspiring, probably, many other things. It's each day, this presentation of title lightning is broken at a spot, but we can fix it without further ado. Who's that? It's a little bit dramatic, thank you. Thank you. Yeah, so as the title says, for those of you who work in lightning or been around lightning for a long time, hopefully you will recognize basically all issues on those of today, and go through a very long list of things. But I'll try to go through most of the kind of 50s, my understanding of the current thinking of solutions for a lot of these issues. So hopefully that most people will just have a chance to learn something, or at least get some better idea of where things are going, even if you already know all the issues. Some of these issues should be a little complex. I'm going to try to explain them the best I can, I'm not always the best at explaining things. If you're confused, please do an erupting. Throw something at me, clearly throwfully loud, just yell a question, and I'm okay with all of that. Just, I want to make sure everyone's on the same page with the end of this, so feel free to interrupt me as we go rather than holding a question at the end, if I'm not making something entirely clear. So yeah, I mean, lighting is obviously more quickly. People are not sure if there's all kinds of things, changes and people are saying, painting them, the US is actually good. You're like, pay for something, painting it for people, so for lighting at this point, because lighting makes it actually easier now. But a lot of that should get out of your curve. To develop it, could you move? There's a lot of people working on lighting, a lot of really people working on lighting, but lighting is got the big, and it's kind of hard to make progress very quickly. So it moves, we don't want to break our lives or anything. But there's still lots and lots of issues. We're going to talk about a bunch and we got that. We have to improve these issues, but without breaking things and that makes lightning, development is still kind of early, even though the adoption is showing a lot of progress. So everyone who's been around lighting, those lighting, of course, are the places to be on my all the time. You've got to check the blockchain every now and again. You've got those sophisticated time outs, stuff you've got to be able to go to the chain. Really lighting, everyone excited that this was fine. You're going to salt this by putting your dough in your wrist, my home. This is a great bottle, it's really cool. You keep the wrist very tight, but they're all the time. You're going to have to go to the home, I don't know. You guys live at your home, I never go out, but hey, whatever. You keep your wrist right behind the home, it's great. You're in Florida and you're in a hurricane, and suddenly you're going to have to raise your eyes off line, and so much still with your money. But it's okay if you lost your house too. So you just wanted that extra paint and stuff right now. Okay, so well, you don't put it on your wrist very fast. That's a thing for some people, for others, maybe as much. Maybe as one of the cloud. So this is great cloud service providers. You can pay them some money every month. They'll keep our service online. It's also on each other's over at K-1 US East, and then these higher-end ones stand on. So it makes you not alone, but you just do this money. So it can be nice, not great. Or maybe you used, I don't know, there's a bunch of bad services that someone contacts support. Tell us something else they're count, and they still don't want to be because they're hopefully less familiar count. This is only half of a handful of times, but maybe you don't want to be that kind of. That's great. Okay, well, maybe let's put it on cloud. Kind of sucks. Okay, well, turns out, goes to users like mobile phones. Mobile phones are great. Everyone actually wants the normal insurance, what they're used to. Use it, use it, kind of want this experience. But they're used to doing install on that. And suddenly they have had all the stuff works. It's in the app. To have done all these things, obviously, just blank clients who are server. And we didn't want to go to Stoing-Off, so. Maybe that's not great, but they know we can make apps work. Maybe we can get the link in the app. And we're not going to have any drawbacks there. It's two type of users, some people shaking. Like, I don't know why. You would leave your basement, but some people do it on toll. And then there's a full offline, so three days. And then the lost or money again. I don't know why. So, or actually, it turns out this problem is more nuanced. Not that simple. There's two issues here, right? So there's the sign that you have to be online. You have to check in every day or week or whatever. You could change the time for the, 40 was the number until the, the bug last week. But that was, that was kind of tired. So, so you're going to have to check in only once a day and a game. So, okay, maybe we can do that. Maybe the phone is probably online once a day. It turns out you also need to be online or see the payment. So, like, right from that payment comes in. You want to be online to actually see it. That's really great. The phone, you can get push notifications. Your app can run. Oh, no, actually, it doesn't work that, right? So, phones are very conservative values. The actual, you know, all the time. If you're always on your big one, why? You'll probably get CPU used in, from the notification comes in. The notification come in. The, can wake up. You can do some work. You can, you know, we are, I put the, the agency, you can claim the payment. Well, good. If you only open the app once a month, the phone is especially in iOS, I really don't want to give you any CPU time. They're just in, the user doesn't use the app much. CPU waste battery, especially network access waste battery. And so that would be really bad news for experience. We're users that they're, they're battery, constrained, you know, I mean, you're a pain, you know, giving them money, but I, we can't take their battery. So, so, if you choose a yours, we can't do that a lot of times. So, this is a new one, so I'm going to try to do it. So, okay, well, I'm sending, I mean, when you send her to a camera, when you send the payment, you probably have the app open. So, yes, that's not actually a problem, but you see a payment. That's, that's a problem. So, so, in plain name, right, we're sending these payments to the multiple hops, just, you know, hopefully many hops for privacy for five homs, but you're sending a name, you're sending these each shield seed rate. So, along the entire path, you're not to lock in money, you're not to commit some portion of the channel, so, to the little resources, to this pending payment. And that, that phone, and theory, there needs to be online, to say, hey, now I can't pay them, now we're not holding these resources hostage, if the phone is not online, you're holding these resources. So, obviously, it's the whole time, this is terrible. Okay, so, what do we do? There's this, there's this, we've now read a brand of the nascent payments as what we're going to call it. There's this, this is all proposal, and I had to, to solve this problem. Kind of, the intuition is basically just, the phone tells the send their rent online, it's not that complicated. Well, okay, it's not that complicated, that theory. And prior to this, it's very complicated. So, we actually need, like, layers of things we need to build to get to the point where we can do this. So, we need money and my students, so, one of the messages is a really great platform, and how is there a receiver going to tell the sender when it's online, without revealing what it is, you know, that's hard. But we had this great, latent artwork, we have, we have, we will do this, we know it, we can run payments through them. So, we should do it on the MSX, we can be able to send messages overlaying. They're finally coming, you know, I think the, Claire has it like, life turned off, baby fall, corollating has it, life, but like, if it turned off, because it's still kind of data, but they were leading them at first, so, I think, if it too much should. LVK now has it, we're working on some of the finishing touches for it, but looking forward payments, or forward messages, so, actually, we can send these messages to the same hand online, something you'll see now, okay, well, that's great. But, okay, what about retrotor sending, so that the user opens the phone, sends the payment, and then a payment fail, we'll see it on the route, well, it wasn't a little pretty deep on the route, and then they've closed the app, put it in the project, and then oops, now we can't be tracking, well, that sucks. Okay, well, how do we retry? Well, we have trampoline, trampoline spray, so there's the new trampoline for, I don't know, forever at this point. And you send the payment to the LSD, and then be there for a top, you tell it we're sending it, oh, we cracked, we didn't want to tell the server we were sending all our payments, that's for predatory seed. All right, well, we'll do this trampoline thing, and we'll have multiple trampoline hops, all right, we'll get there a little bit. Okay, well, that's one more thing we need to build for ace payments, we gotta have trampoline, so that we can send it to the first hop, and tell the first hop where it arrived, payment, and you can retry for us, even as the phones offline. Okay, well, what about, so the user is really low to this user experience, something with vet and mail, that they go to the chat chat with the other colleagues, other things, you can QR code, and you can, like, put that QR code on Twitter, and then people can just scan that QR code and send you money. It's really great, it's very interesting people love it, but I think you should try this, in terms of, you can't do that, because it's the invoices of single use, that's a problem. Okay, so we wanna have multi-use invoices where there's simply it can be offline, where we wanna send the payment, and then it just tells the sender when it comes online. Okay, so we need, on your message, you can send a sample in, oh, single use out, we need ptl seats, so not only that we need, so we need the sender to be able to create the payment actually, the, you know, the HTTile C construction and lightning, you have to have the hash, and pre-imagine the hash that the recipient reveals to the sender in order to clear the payment. There's an old proposal to use, short signature, as an ads, now with taboo, we can actually input this, something in, but we can swap the hash in the pre-imagine for, or call it that, so the signature's gonna have to not work, but we can do magic in easy land in a little decur, and we can use actual signature's for it, and this actually allows the sender to say, hey, recipient, you give me this awesome public key, but then you know, similar to the payment actually lightning, I'm gonna actually add my own little bit to it, and then to the week so that we can't use a payment hash for the ones, so you have to have a has to be unique, so the sender can add a little bit of information to it, and now we get this great single QR code, experience with offline receiving, and we only need to build three massive features into lightning to get it there, and then we also need a few follow-on things, we'll get it one day at promise. Okay, so that's a submit payment, alright, so we've solved the always online problem, right? Oh, wait, it turns out sometimes software has bugs, it happens to all of us, we've all done it, and then your nose offline, and now you can't force a show, see, who says this from? Okay, so as we've all learned this week, your time-locks and your lightning signs has to be at least your response time, so when there's a bug in your nose, has to be time for the developers. Fix the issue with ship a patch, and you go apply the patch, make sure your time in your time-locks, and play the name R-Waltune to your step. Okay, well, it turns out we have this watch, and watch Harry's Pixel and Brennan's with, being online all the time, I've heard, and what I've been told, yeah, it must have any skillsies, so if you're any skillsies watch stars, actually don't fix your problems, oops. Yeah, so there's several of it models for watch showers, right? So there's probably three watch stars that use super red, things that always make sure you're money back. The one model that doesn't actually force all the conditions, but the super red version of watch tower is great. You send it like a list of basically, you know, if you see this transaction on the chain, here's some other transaction, the broadcast that's super awesome, it's super red, because they actually don't learn anything unless they see those transactions on the chain. So that's not actually the full-length, but you can trust model if you have an e-shell-z, so in lighting where you have your 48-length, or you see what they have on the outside, you have to forward it that one another, if you're a regrettable note, if you go to the chain, if those channels go to the chain, and the upstream channel goes to the chain, and they reveal the pre-image for this e-shell-z, clearing the e-shell-z, getting the money from you. On chain, you have to see that pre-image, take that pre-image, and then back to the note before, and then you receive the payment from me, forward it on too. Yeah, no, what sure is that we'll do that. Especially since they want to be private, ideally, you have to reveal information about your individual channels. You have to tell them, like, hey, this is my upstream channel, this is my downstream channel at the payment that I was forwarding at this payment action. It came from this channel, I'm at the National and here's how you broadcast the currency for that other channel, and we're able to payment for an image, and that would be entirely not private in any way it should perform in the, watch shower with everything about what's happening in your channel. Yeah, well, anything you can do that. So, baby watch, ready to go, should consider you're interested to watch showers, and should actually run their note as small, independent machines that are actually running these kinds of pseudo-launch showers that are actually running, everything about the redding note, but when you actually think about running a watch shower as many of them are implemented today, there's a redding that's super great, but keep in mind that they can't enforce each KLC state, so you might want to consider changing your max KLC inflate limit, so that they're only ever exposed to a smaller amount of Everest, because you only allow a certain amount of money moving through your note at once. Let's see, so I've heard a watch shower problem there are all fixed with Altium, right? Watch showers, can't scale, and they have to sort of much data and L2 is the great view of proposed, it will probably actually some of the dense and softwares, because it has changed a bit quite to apply, it allows us to store only one little bit of constant side thing in the wash tower, and we don't have to store all of this old historical state, you know, watch shower, data storage, rows, as the channel seat. We've stored it in time and it grows unbounded, you can ever believe old stuff. With Altium, you can build all the old stuff that's great. Oh, no one has the same problem. You still have this private seat, you can see, of course, I'm going to trade off, it doesn't solve that problem, because again, the watch shower would have to know what channels, where we've been aiming to perform to the gross wish channels, and how it flows to current state of the channel, which means they always need to see the current state of the channel, which was kind of the point to avoid. All right, well, watch showers are helpful, but they do some things. Okay, all right, so, um, this one's fun. And I'll talk to you later, so. Okay, okay. Hi, sorry. Um, okay, so this is the end of your comment, come to Trump to be transactions and vehicles and paying, there's so many tax here, it turns out, you know, lightning security model is, if something happens on chain or if nature or sees about to expire, not only do you have to be online, but you can have to make sure you can get the transaction from the blockchain within some time period, some time limit. You know, you have to, maybe you have to claim an HGLC with a pre-image, maybe you have to force both the channel and do that, or maybe you have to force both the channel and then, time out with an HGLC, whatever it is, you gotta get a channel on, you gotta get a transaction on the blockchain within some time, time limit. Um, so historically, you know, really like the, we mentioned, there's one of the problems on this slide, so that's good, good progress. Um, we started with this model where we had, commitment transactions, so in lightning, you're kind of always updating the currency, and the currency is actually a flexible transaction, maybe you can go to the blockchain within any time. Um, but you're only updating the fee on that channel on that current, say, or that current transaction, when you're doing, when you're online and when both parties are online, and both parties are accepting the new fee. But what happens is, one party is offline and the fees are going up, and there you have a time limit, and you gotta get that transaction firm, but the fees are going up and up, the fee on that transaction is out of date, and suddenly you broadcast the transaction, but it just doesn't have enough fee. Well, you're kind of sort of, so that was really bad. I was always, I was, you know, we can't predict what the future fees are going to be. Um, so we tried that for a while, and then actually did call some problems in practice, and so we had it the same called in-course. Um, and so this is, this is the commitment transaction, this is the actual commitment transaction. The landing has that current statement, current transaction we broadcast, the two stuff, the two remote needs, you'll see these outputs are all in kind of, the things that we're already there. It's your money, your peers money, and then the stuff for the agency. You'll see these current inflate payments. Great. We know what other things. Uh, we have these anchors, so these are additional outputs on the transaction. Um, that allow you to spend the name, and potentially do travel pays for parent rights. So there's two solutions, traditionally to the problem of, I have a transaction that doesn't have an FED, and you can get it in the blockchain now. Uh, we'll place my FED, right? So we'd like ideally to take the transaction, modify the transaction, assign it to our feature in, and announce that. We can't do that because these, check these transactions are co-sign, to pick your car boarding, and your car security might be evil, or they might simply be offline, so we can't do our BFB. We can't do our BFB. We can still do general pay to the parent. So that means we create two transactions. One transaction spends the other transaction. This one has lots of FED. This one has very little FED, but that's okay. We can quite go and look at that and say, oh, we're fine. We both of these. I get a still T-SqP, but I have to include both in order to get this high FED. So if you're on a good spot, I can do that. It's great. This is available in the mean, most lighting, implementations. We're still working on it. It's default in some, not default in other words, and the logic to actually construct this transaction, which is super complicated, and so it's still kind of working progress, and it gets super robust, but okay, great. This works with dairy. Much of pretend that works with practice. I don't know if it's good with cows or something. Great, great, great, great. Yeah, and then you can actually go into the temple. So what if, let's just spit ball here? Instead of you gross out of your current state, your car party rent has their current state, and they do this anchor thing, and it's really cool. It's something, a lot of few things just don't put lots of futes there. So now this whole, like, multi transaction packages, even then pooled, it's sitting there, and it actually doesn't have lots of futes. So it's still low feed, and it's not going to confirm. What do we do? Well, okay, we've got the second anchor here. This anchor is our anchor, we've got the spend this one. We can construct our transaction, but we don't know what's in the temple. We don't know that this thing is there. Man pool is not, there is no one, but there are individual man pools on different nodes. There are various things you can do to cause nodes to have different man pools. That's fine. That's how Bitcoin works. That's why we have blocks. If everyone had the same level, we would never need to build blocks, because we all are reading on what the current transactions are. So we have to do that. We don't know what's necessarily in the mental pool of the miners. Maybe we know what's in our mental pool, but that's not so useful. We don't know how to wish transaction is where to construct our anchor's spend. So that's hard. Okay, so that's our mental pool. Let's just call our transaction that we had on the last slide. Our version of it, our local commitment transaction. Unless it's the number of our package rate, let's do that on our Bitcoin core node. And that has higher feed. So like, no shooting stuff that it's said, turns up Bitcoin core just isn't that smart. So there's no way currently in Bitcoin core to hand it two transactions of once and say, hey, I believe you have some other transactions. In your mental pool, you should take both of those transactions and turn them out or place them with both of these transactions. You can do it in the RPC, but not over the peer-to-peer network. So this is what we need to solve this problem. Gloria, who I think actually just got a plane and left has been working on proposals to Bitcoin core to add support for being able to do that, for being able to hand it two transactions of once. And great, so once we get back, we'll be able to do secure anchors. All problems with transactions getting into the blocks are solved. And, you know, cracked us other problems. What if instead of lots of, instead of just doing little fees, they've also been lots of times. What if this transaction is really beef? Like, you know, hundred kilobytes, and then there's another transaction based on it. That's another hundred kilobytes. And there's just like a ton of crack in the medical letter, kind of party put in there. Okay, so that's fine. We can still, our transaction actually still has still higher of a peer-to-peer rate, tire fee rate, minor should be, because for that, you know, and they should still prefer that, but Bitcoin core also has a NT-9 service tool. So if you were to just sort of relay our other package in Bitcoin core, this would be a trivial of the denial of service and type on Bitcoin core, it was just general, because here's the R-excepting. These very large transactions relay and onto each other, validating these large transactions. We're wasting a much bang away from the replacing them in the very small transactions. So if you simply blindly accepted this with, allowing our earlier transactions to replace our counter-party, very large package, then you would open Bitcoin core notes up to wasting a ton of bang with and wasting potentially a lot of CPU resources with, did not actually paying a fee. So Bitcoin core has this concept that there should be no free relay in replacement rules or in any transaction broadcasting. So basically that you should have to pay at least one Satoshi review by for every event or the transaction data that you probably need to get to the network. So that means when we replace this big package with smaller stuff, we need to pay for all of the resources that they package in order to replace it because otherwise it would be free relay. So that sucks, because now we're counter-party can make us pay a lot of fee to replace their package and we don't even know that it's an event. So we don't know that we have to do this. To have to be a lot of fee or replace their package and now our party party is just starting us with money. So that's not ideal. Either, to avoid a risk of re-entry has another proposal to also address this issue via another change to Bitcoin core. I think now we call it transaction version 3. So what we're going to do is we're going to say, okay, Bitcoin course, you know, a little special utility for lightning. We're going to mark this, the commitment transactions that both produce synophonus transaction version 3 and put a little version 3 on the top. And then the, our counter-party style of the units, so we're going to be able to don't overbe a loud to broadcast very large descendants of our commitment transaction and suddenly it's a backwards way. Sadly, so it's important to note that any denial of service on this Bitcoin core will allow this kind of attack or most denial of service to Bitcoin core might allow this kind of attack. So it's not just signs, it's also number of transactions here. It's also very, very strange that Bitcoin core does to make sure they don't get to denial of service attack, have these kinds of issues. And so we need really to tick first with read and just say like, you can only construct the package that looks like this. So like, very limited and then allowing us to, to, to, replace it. So hopefully that that's all of our issue. And we can finally get transactions into the blockchain in less than everyone's trying to get into the blockchain at the same time. And I don't know what we'll be doing there. Yeah, so I mean, most of you've probably seen the old flood and little paper who's various names for this type of attack different specific styles of the type of attack. But basically if you hold a bunch of issues and see as a bunch of different nodes have to close the course load the channel at the same time and there's only so much flux space and how do we get all those channels on the chain? Yeah, I don't know. So this is one of those longer-term problems that we don't really have a great solution for. There's various proposals. You can have some kind of self-porting maybe on every working Bitcoin where you can like prepay for block space and then you can like prepay and then like have guaranteed block space and then you can have a future then probably doesn't work because you'll just open up all the Bitcoin core nodes in the mail. Service attacks can do that. Maybe you can like have some way to scale the time delays, right? So we have these delays in lightning where it's like this HDLT expires at this block height and we have to make sure we can get our commitment transaction into the blockchain before that block height. Well, maybe we can make these numbers scale. Like there's a lot of the mental health backlog because a lot of sub-goinging that the blocks maybe we can all know that the number is grow a little bit and not clear exactly how you do that. There are some proposals that they probably rely on. Other earlier changes to Bitcoin all of these departments that kind of Bitcoin fork that there's not kind of a way to do it mainly. So that's much longer term concern and I'm clear exactly. Exactly how we should solve it but probably in some way we can get some software kind of guess hopefully maybe some of us are going to get it. In conclusion, currently this is a do not open channels and people you don't know. That's that idea. You might get your money stolen early stolen of a channel to someone you don't know who is like really motivated to steal your money and it's going to rate a lot of code to do it because they can probably definitely still get money. Alright. Okay. So we've solved the blockchain problem and we can get transactions into the blocks. Great. You know, leggings this great source router thing so that means the center of the payment weeks for router that is going to take through the network. And this is really great for private see because you know we're not just like telling everyone along the right where the payment is going to go to because that would you know tell everyone where payment flow is and they would be able to learn all kinds of information about who's receiving how much money. So instead we just say like the no-trip and learning anything more than the payment from a payment from and the payment is going to. And so we can create this. You have to select a path. Use it to run that. And I didn't know this use and actually expect payments completely. I thought they were fine with 10 minutes. I wasn't entirely sure I were doing this lightning thing. They like a hundred milliseconds. Which I don't. People are in a nation I guess. I don't know. But if you want those times if you want that like thing that the user experience people keep telling that they want that first route past the work. And so how do you pick a route that is going to work? How do you make sure that the route you pick through the lightning network is actually going to get the payment there and we know the path has enough available to pass it into the channel and the payments can go through on the first try and it can happen quickly. There's a ton of notes out there. There's like, plug that folks have done all kinds of different ideas that you can get through and you can get through of different ideas for how to optimize the note who the little materials with, however in the note, blah, blah, blah. And it turns out a lot of them kind of like spawned up and then go up busy with life and forgot about it and like all the channels are constantly saturated and your payments will never work going through those channels. So probably, of course, those notes I guess I don't know how you learn who those notes are, right, so you start up a note you open some channels you're like, I'm going to wrap this payment it's going to be great. I'm going to send it somewhere and like half the network half the network is nodes with a channel that are all entirely saturated because they're completely unmenting. And so how do you figure out that's going to have high-ccessory? Because every time you take a half, you have a chance to have for something that the payment goes through. Yeah, that's right. So maybe that's not what this is going to be. If it's a brand new you ask your server, or you say, hey, what's the boss's core for all these channels? Or maybe you ask your server, like hey, which channels have high-ccessory? How often does the use of these names fail? Maybe you start probing a lot. Maybe you just send a lot of probes up there. You try a lot of paths all the time, even though they're going to fail. And you're going to waste all of the lightning networks resources, giving it to the null of service to tackle, collating that one can take the network down. But your payment's may succeed. And so when I also probing, when she is just rude. Oops. OK, well, all right. The real goal will do some score tomorrow. It's going to be a fun way. And we'll keep track of which payment's the seed failed, which has our payments go down, and which shows our reliably able to repamets. That's great. What that ends up measuring is, in fact, what most of the clients don't do. Most, sorry, I'm sorry. I'm not those players, most notes do. They keep track of reliability, you hold the payment, that will channel to the network. And we just strongly prefer to use channels that seem to be reliable. What this ends up measuring is which nodes are actively rebalancing their channels and keeping channels rebalanced. And then you're just strongly prefer all of those channels, which is a whole separate to me. There's an ongoing debate in the laying world about if rebalancing is good or if rebalancing is a picture or something. If you're rebalancing your channels, or even if just pushing that imbalance onto other people's channels and causing them to be not able to outpandons in some view. It's these most regulation needs better understanding of the lighting that we're dynamics in some cases, yes, in some cases of any value. So that's not ideal either. But it certainly gives you a consensus as seen. If you're strongly prefer these nodes that are always rebalancing, okay? But then we're also only rewriting through these Q nodes that are rebalancing. The cancel of nodes that are rebalancing does that mean that our privacy is lost again because we're only grabbing over a large small subgraph. We're not grabbing over the entire light we're actually grabbing over a strong link for furing. Other path, certain paths with them in that work. We ended up re-rebalancing a minute, but potentially in terms of, well, also even if we have the algorithm that tells us which shows every balancing, which channels are rebalancing all the time, we're going to strongly, for those channels, what are about these nodes that never meet of them that have acceptable amount of payments will see a lot of all in our large nodes and accept channels. Everyone, so they have a balance of channels and every single one of those channels is always completely saturated to them how can help your names be in the wall. So that's also when you shoot, you can't rebalance cheaply or easily through, if you're one of the peers of this node that regularly gets almost all of this capacity pushing in one direction, it becomes harder to rebalance you just constantly have good new channels, that's one strategy. In fact, it's a common strategy, but certainly, when a node that just started up twice, maybe they're going to have a really great time in finding which of your thousand channels are actually having capacity available. And so this strategy of this like, put up a big node, plant-and-beuses were all channels to you and it'll work itself out, we'll get plenty of about liquidity. It's not actually all that useful. In fact, you see many of these larger recipients and longer accepted channels from everyone that's starting to have these general, the no-beur lists, where they accept channel to life people in those teams, et cetera, et cetera. So, okay, you just all the extra channels can go to those, I don't know, I'm pretty excited about everything. That one is, but finally you do that. So it may be able to put these the hard nodes, so I'm able to get in that liquidity from somewhere in order to receive payments. There are many people working on that, so all of the problems in any of these slides, in battle liquidity is probably the most solutions and the most people working on solutions and the most different marketplaces and whatnot that have been built great. Maybe we don't use that too much time on that. There's still many built in, and now it's not necessarily easy to do things like, so we have to win our, for now. But yeah, we're running this to part, I guess we also mentioned that, you know, the actual solution arrived is you just open a channel if we're ever trying to pay. You can use a large boat that's basically what you do. You know, you're a large boat with less payment volume. You're just open a channel with all of your top destinations. And then it's no problem because you're top destination, you're probably everybody's top destinations and they have a chance of channels and they're all saturated so you don't really can't pay them. They're no more debated, but you can pay them. If you just open a channel. So the late name is, you know, you always only have two hops, maybe three hops in the worst case, everyone opens a channel with everyone. And late work's great because it totally scales and swear I've heard sales super great. If everyone has a direct channel with everybody else, we'll never have any problems. Definitely also don't have to over commit the liquidity there, but that's what people do today because that's what works. And actually fixing this problems hard, but for now we've done what we're currently. All right, yeah, so I mentioned the privacy rate. I mentioned where it's your few times but how you like kind of want these long paths and the enders through the network, so hopefully, no one's still don't worry if we are. So let me set the little bit of context before I go on a privacy. As you probably know, or hopefully no channel says, all these other folks, they have all of these great data sets for UTXOs and who potentially owns which wallets and which wallets are associated with who else, and which you text, so it was a cluster into wallets. They're actually good at this game. It's a great game to defend against, they're better on it than other change, but big quiet because other change are horrendous for privacy, but big quiet also has its problems, and UTXOs are plus during this painful, but they have really great data for that. So what they're primary motivation right now, is they want to connect to their existing data set to lightning. So they want to be able to say this lightning node is this cluster of UTXOs that are already identified as a wallet, and that wallet has been receiving payments from Coinbase or Cracken or whatever, and I can go ask them who it is, and then I will identify which two ones this lightning node because I know the UTXOs. So that's our biggest risk, our most immediate risk, because that's what they're doing, and what lightning does is lightning routing nodes just tell the entire world which UTXOs are theirs, and tell Shannon else directly, hey guys, I'm just routing node if you're on my UTXOs, so that's totally private, definitely the thing we want to be doing right now. All right, yeah, so that's a problem, and you should fix that. So why do you do this? Do you also exist in support and lightning? We don't want everyone to be able to come online and say, hi, I have a channel with everyone around payments through me, I'm trying to do a few is so around all your payments through me, and I can see everything that's happening in the lightning, that would be bad for privacy, otherwise. So we need some kind of denial of service assistance, we need to be able to say, hey, I have, I've proved to you that I have some Bitcoin on chain, I have a UTXO, it has some Bitcoin in it, at least this is a cost, so it has a cost of denial of service tech in the network. So we use UTXOs for that, that's why it's so broken right now. So we'll start having a fix this, maybe we use it on a truth and way to hand wave. We prove that I have a UTXO, but I'm not telling which one it is, that would be really great. Could be back to this, it's not so hand wave, but we spent a good chunk of time looking for a good seat in the PC system that we just wanted to use on the shelf, didn't really find one that was super mature, and super going to be super mature for the next few years. Hopefully this is something that changes when coming years, so we can actually switch to using a new team for an all-service system here, which, okay, fine. But maybe maybe the need time to prove balance, we should show a light here, I have some balance, and I can tell you all of my UTXOs, I have a tiny UTXO that I have for channel, which will prove some balance, and maybe that's enough of denial of service resistance. Clustering will probably be still eager lunch, so they have chain analysis, et cetera, or they're a cluster of UTXOs that are today in the virtual wallets, they'll probably still win, because they will be able to cluster the UTXO we use to prove with other funds, which is probably coming over a little bit, so it's lap. But avoiding the coming when funds is really hard, people continually break this, probably maybe other bit than actually people got from prison, they did come in, coming over funds too much to rob a bug in a wallet, was even their fault, it were really careful, there was bug, their fun track opening will deal with prison. So maybe we're having nodes as rude, but maybe we can represent the future, whatever I'm trying to know is, well, I mean, you still have UTXOs with public node, that public node eventually that channel is gonna get close to the sponsor, gonna go to the coming over the rest of their funds, and again, clusterings gonna need lunch. So the attacker, machine analysis in the states, can all learn, hey, these funds, was a channel that they closed with some one, the channel was announced, so it was clearly a predetional, I got coming over the rest of their funds, so I know if there's errors, I can go ask Ben, hey, there was this channel that you had open, what was the IQ to a senior year? Even though it was predetional, I probably learned actually who it was by knocking on the door with Sapina, and actually they'll let me know. All right, so this is, okay, so maybe maybe let's go to the UChXO Department, and that's complicated and maybe maybe slime. So what about inline? What about can we have predetional inline in? So you generate invoice, you put your public key on there, you sign it, and you made it to someone, and suddenly they know which road you are, and which UChXO is yours, yours, yours, and our shit. Um, okay, so receiver has no privacy, that's not good. But we don't have a solution for this one, right? Blended paths, we can, in fact, do something like familiar with. Uninservices, door, insert, system, door, what actually reveal to people, is you say, hey, there's an introduction point, it's a few humps away from me, but if you come to them, go learn how to get to me. And you tell people that they talked at an introduction point, and then it goes through a few more humps, and then it gets to you, and so no one can theory actually learns who there are simply endis, it's great, we can do something exactly like that lightning, we can show these, we can create these paths, we can actually probably don't wanna do introduction points, some cells, but we can do a pattern, we can hand the entire path over to the center, turn done this a lot, data, we can't fit in, QR code, okay, so we have this bunch of data, we're gonna communicate it to somebody, ah, we have lightning messages, so we can take these blinded paths, we can actually do short-blided paths and do that in a QR code, but we can't include more than one, we need to, a blinded paths in a QR code, which is not much space, so we need to, I mean, I suggest they didn't even ask a word blinded paths, and then I'll give you more blinded paths, and then you can retry the pain as you time to the vegetable find a path that has not been put in any great grumps, both well-blending messages will get their eventually. As long as the nose in the onion message kind of like down, and if they're offline, then you just can't take it, it's all well. Okay, so, all right, so maybe you can fix your secret privacy. So what about, we're having those. Turns out, if you actually sit down and work on it, there's number of good papers on this, a reality note can make you very, very good guests, all those not a guest, as to prove the center of the receiver of the event payment you're seeing is. Now this is curious of this, turns out in lighting today. Like I said, everybody opens a channel with everyone, so there's only actually one of some hops in most paths. So you could make a pretty good guess if you're the center of the recipient, or if you have only hopped the path because you were connected to the center and the recipient. That's a complicated. You can also make good guesses as how many paths they went through, so there's the CLCB, those actual time locks in the in the HCCS, which we're driving through the network. So we don't want to increase those time locks too much, because if we increase those time locks too much, right after weight up very long time over the HCCS times out, so there's just a payment, or someone's doing a channel jam, and you can make the channel jam in the time works. So if we can't increase those too much, though, then all of a sudden the intermediate note can look at the HCCLC and immediately say, oh, this HCCLC has been through, or has two more hops to the destination, and then if you look at the routing graph, you can say, I know where I'm connected to, I know who's two hops. The way for me, I know where this came from, I'm actually gonna sit down and run, call me, grab me all of the rhythm to cross all pair of all sources on the network and all this nation's on the network, and it turns out it was generally not that many routes, so two more hops from you, that have more than one or two different potential sources of this HCCLC. And again, you can make a really good guess as to who the source is in this nation are. So this is really bad, so you can see, you know, you can put yourself in a good position where you can, for example, learn how to obtain a volume, your competitors getting, and see their numbers before they even do. So that's obviously pretty bad for a payment rail, if you can see your competitors numbers. So, we have, in terms of this link in the art, there's some ideas, there's some potential solutions, the, we can randomize this YOTLC a little bit, hopefully that I'm proofing some what, some those do this, some those don't, maybe all I'm gonna do, I hope all I'm gonna do, I don't know. But routing is also a little deterministic right now, so we're writing algorithms are a little too easy to learn, which can catch paths, so it's my critaking. Especially if you have any guesses to which other nodes have on the live channel to because then you know the channel, the nodes definitely will be taking those paths, so you can, we can randomize the routing algorithms a little more, this is like an open academic problem, it's like how do we build a routing algorithm that considers privacy a little bit, it's also not an obvious question, but something we can improve on, you're just adding more hops to payments, might be fault, might improve things, but we have to balance that up, forcing us to access rates and users to one payment, completely, so it's not clear exactly how you do this, but maybe we can make some progress. Yeah, so it's also important to note that, you know, lighting is a great thing. In general, in networks like lighting, like torque, these low latency, forwarding networks, what you're really trying to do is you're trying to hide the noise. If you're routing node and you see 100HG, you'll see the ones, you might have a little less idea of which you shield C is a correlated with what other payment flows, so you might not know that, like, for example, if someone's making a payment once a week from their nodes we're giving this a nation, if you monitor your lighting node, over the course of a few months, you might be able to eventually identify exactly that there is someone painting this payment once a week from this source to this destination. But there's a lot of noise that there's a lot of other payments. Maybe you can hide it, but it's always a little better. This only works so well, if payments are moving very quickly, this is only so many HGLCs in a channel. Once, for example, you write two nodes, you correlate two different HGLCs, because there was only actually one HGLCs, you saw that those nodes, even with HGLCs, one C or PTLCs, each DLCs, you can see it, obviously, because they should name a hash. But if you're writing two nodes, you might not learn that they're the same payment, but only if the, these are a lot of other payments going on at the same time. So this one actually has a really easy solution. More people just need to use lighten. More nodes, more nodes go for privacy, more people need to use lighten, tell your friends to use lighten, so that you get to privacy. Easy. One last thing I want to write to see, it turns out, values are moving today, it's really easy. So without even probing, like literally just from monitoring, there's successes and failures. At some point, I downloaded it, where I got access to catch apps, obviously catch ups into each other payments. I got access to catch ups, data on their predictions for the balance range of one of my channels, and it was accurate to within a few months' access. So they had an almost exact understanding of what the balance in my channel was at that given time to very, very low to very, very high accuracy. And if you can do this in math, which in fact, can probably, then you can watch payments both through the network. Great, if you know that these three channels, suddenly had their balance shift in one direction by one million sets, then you can make it pretty damn good. Yes, that one million sets payment, just plug those through those three channels. So this is really bad. It turns out there is some easy things we can do now to improve this. There's probably more things we need to seriously consider later. There's this idea called the Oakland protocol, just because it was created in Oakland, and engineers are about it. The naming things. So if you're operating a lighting node, there's a strippiest idea, and hopefully it was a setting for the math, each TLC in flight I mentioned it earlier, because if you reduce this number, it means you have lower risk if you go offline and you have to use your watchhower, who should reduce this number? Because it also improves everyone else's trying to see what we're having for you, because you can hide what the actual channel's balance is, because users are only able to probe up to the max H Shield, C value at flight, and if yet max H Shield, C value at flight is less than your channel's current balance, then users aren't able to probe you, at least as easily there's some other way to get probe, but at least it makes it hard. So you should change that number. If you're lighting a implementation is not default to less than half the channel value, you should mad your lighting and change the default to less than half the value. And if you're lighting, if you're a node sending payments, you should prefer to write it through nodes that are setting this value into less than half the channel value, because it proves your privacy and cash app does this. It's only very small amount, but it does this, so you might make more driving revenue because some nodes prefer to write it through your channel if you set this value to less than half the channel value. So, good. So, I don't know, I've been out of time for a while, but there's also a slight channel jamming. And I don't know. I got nothing. You think? You think more channeling? You think more channeling? Oh, I'll quickly run through this. So, the basic integration for channel jamming is channel jamming is just sending a bunch of HTTles. It's sending out them, not letting them expire, and causing the internet works in a longer be able to write payments, because they're just pending HTTles. Everywhere, they can only have so many benefits. HTTles are channeling, suddenly, no one else can get a payment through. It's basically two directions to addressing this. It's more recently got a bunch of research. Either upfront payments, so users have to pay money upfront to revenue payment before that you ignore your weather, it's the season fails. So, this has the problem of life. Is the feet good enough to compensate to increase the cost of the attack, so that attackers can't do this, and our payments, success rates enough, that users are gonna get pissed off, because the payment fail at least, still have to pay the fee just like the theory. So, the other approach people are considering is reputation systems, so maybe you pay off repayment sometimes, but if you've been doing a lot of payments, you can get some blind atop in, and you can use that. Say, hey, I'm someone who's been doing a lot of payments to trust me, and then there was trust you. There's also if any of these still seems to be been waiting too long, and it hasn't been expired, that you prove that a channel went to change, you've shown that you actually spend some lunching fees, as pens, and then your applications burned. There's a number of different ideas, there's number of research papers, trying to cost out the, you know, how bad the user experience risk is, how I have fees on how much it prevents the attack. So, need more research, there's been a ton of great research on this very recently, so hopefully things are moving in a very direction on this run. Thank you, I am an optimist, I swear to God, I still love my name, but thank you. Thank you. Thank you. Thank you. Thank you. Thank you. Thank you. Let's do Q&A real quick, let's do it. There we go. I would have a question for you, but I don't know why you can't just read it. When can we open up channels, like people who we don't necessarily don't be able to hold on these tiny, tiny releases, and it's like, oh, that guy has, my channels and stuff, maybe that guy's cool. Is there going to be a point in the near future, where it's like, hey, like, I can go over to our company, and I'm going to be able to see a cool, like, for our new videos. Yeah, we're going to be able to fill up this. Yeah, I mean, the first three issues, I think we have good ideas. And the first one, we've got code for today, and in most lighting implementation, it probably kind of works. The second two issues, this changes coming in on the right of one for Bitcoin Core, and it's hopefully soon-ish, on this year or whatever. So that's also very practical. I think we can be optimistic about those two issues. And that's how you get the year risk from someone who's who's trying to be an artist and do some of these paying taxes on a small scale. So I'm optimistic about that, and like, the year or half fish timeline, timeframe, maybe more, and I want to be a customer scorer there. There's few years of what I've heard. Three years, three years. In the large scale one is concerning that doesn't have a clear solution. Hopefully it's something that you know, is mitigated by analyzing and seeing whether someone is open in wage money channels before it happens. I'm clear how practical that is. But it's not even a attack against you without why it's just with everyone. So yeah, I mean, the large scale closure thing is really concerning. I don't have to go into the S-Y-A-P-E. Next year, right? Next year, right? Next year, probably. Next year, dog. We'll talk about the 2022-3. Yeah, we'll come with the United States. This is a whole way to promote the 2022-2. Yeah, but yeah. Did anyone have a question about the world-crafted sarcasm that had a very nice presentation? Did anyone like, was like, oh, it was a huge series of that point out, actually, that's been starting there. It's where it is. Yeah, it's where it was been, like, uh, oh, sorry. That's a good thing. I really question, but now to the end. Yeah, it's easy. You can just reverse all the payments and the virtue of this group and consumer is protected. It's fine. Well, unless it's the new, what's the new one? The sale, unless it's sale, it's basically insuring any way because the things that my reverse your payment. Good luck. Good luck. Good. Good. Good question. Good. In the mass-positive case, those reducing issues, each ELC is what you're helping you, or is that some other does, but what's your personal risk of the mass-positive? Yeah, yeah. That if the attacker has the channel, has one of the channels with you that you need to type out the HClC before they can claim it on some other. It's a great, right? But they also have the other transactions. For those rounds back to minimizing HClC the HClC-excilter, right? No, it's also because they can broadcast the sale state and then if they wait, if they're managed to live a whole day, they would say, I'm trying to find that way, but if they managed to live a whole day, then they could theoretically take the funds at that point. Okay. The main issue is, my signature book, it's sent is, you do a maximum amount of shipping here, is that it's like ink hunting, and if we're engaging for our meeting to the bank. So in the main group, back drug is either the new issue is in the market. You're not going to be in the other freshest you're in fights, but the max of shipping may be in the user or not enough to get into this new background. As somebody is like, your shares are not going to get into the bank before expiration of the contracts. So you have those three in us, so you're going to be in the reserve and you're going to be in the reserve. Can you summarize that for me? That quiz. Then you're returning to the, so one issue we have to on point it out is that when you're doing these kinds of interest fans, this, this, this one thing, this input break, this existing input funding, happy, some reserve you keep on James, you have an on-chain wallet with some extra funds to do these few bumps. And so you only have certain amount of funds there, you want to keep those to your funds even linking where you can. We can keep some amount of funds in your feedback being reserved how much you're only going to have some amount. If the medical gets very congested, you're going to have, you're going to eventually run out. If you keep going, but yeah, and then you won't be able to need a transaction for a quick enough, or if the agency will see this and it's not even worth spending that much feed, and you might just break an off, and then you've lost money when we're in other. Is that close? And? Any questions over here? Ooh, amazing talk. Do you think that zero, or time-resigning funds from zero-competition channels and the populations or a comp-channel is a slid-up of the grid? I mean, third-competition channels are almost, and I hope exclusively used by the law-end swirter, connecting to an LSP operated by your wallet vendor. So I think it's kind of outside that the issues here, because it's really just always your wallet vendor. If your wallet vendor really wanted to steal money from you, they really could. They could just ship it up date, and your phone will automatically pull the GMAF and just send it into private keys. So I'm not like super concerned about it. There's a lot of regulatory questions about it. You don't want to have very large risks. I mean, I yielding people to run open source software, not a mobile phone, there's a huge challenge with open source software, mobile phones, because you're just downloading the binary, and I'm sorry, you don't actually know whether it matches the source code you're running. So there's a number of, I think, more immediate challenges that make that a less interesting, good-sern, and it's hard to pass up the U.S. It's just, you know, users when that is a payment fee, or even for a story, especially on first start up. So it's great off. But, yeah. I had a quick question on a with taro, and basically stable coins, and newly minted coins operating on top of lightning. What your role painting is on that, well, you see, potentially leading to it, calling or conducting the lightning network for its primary purpose, or just simply routing sets, or do you think it'll start on the peripherals and just see how it plays out, what the users prioritize, you just do a girl opinion. Um, yeah, I mean, I don't, I have no idea how it's going to play out. I have, I have a video on those in the idea, and I'm going to play out. I don't see why it would cause issues within the lightning network. It at least it just deploy as current in the sky, and maybe easier to deploy as a parallel network. But if this deploy is current in the sky, where it's, you know, you really have a channel with the market maker, and then they turn it into the Bitcoin, and then it can forward it through. You know, I don't want to see why this would be a concern to be existing like lightning ramping nodes or anything. You're not really necessarily going to be exposed to, to much of what people are trying to take advantage of the option, implied in that. You can see a lot more stuck, HDLC's for a while, but I don't think I'm really concerned about this in that perspective. Yeah. I want to ask a last question. I think there's no other questions, questions, questions. Okay. Second last question. Do you foresee any, like, you mentioned cash effort earlier? Like, do you see any kind of like meat space kind of agreements that are going to, maybe it popularized like a stand in the middle of a long term thing with, like, partners or channel partners? What do you think that's kind of like, I guess the ethos of the space here? It's not like there isn't a plight, you know, if you know who your counter party is, and they broadcast the sales transaction and do a pinning attack against you, I think you have a very, very compelling case in front of the judge. I'm not a lawyer, but judges are humans, and they see the reality of, you know, they're not technical, they're not going to sit there and like parse out some technical bullshit argument about how it's just in the system and like it's in the rules of the system. And it's fine, like, they see reality in front of them, they're reasonable people generally. So whether you have an agreement or not, I would imagine, you probably don't want to perform some of these attacks of people who you are because you might very well lose a lesson. So as far as gossip, with a lot of, like, there's bandwidth with, like, we're down to messages and stuff. So if you're not going to leave there's research in, like, many sketch, are there any other solutions for cleaning out gossip, relay, asking? Is it poorly, guys, working on this? I don't know if you just hear, I'm going to give you shit from this in my tongue. Yeah, I think these that some research on, some of the relating folks have done some research on using many sketching lighting gossip. There was something that they, as to, there were a few different approaches we could take. We had a little bit of back and forth on it. I don't know where they landed, but it probably does something that will happen eventually to be very gossipy with something like any sketch. And hopefully that reduces the back of the cost a lot. Thank you so much, man. Thank you.
